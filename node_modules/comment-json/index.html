<!DOCTYPE html><html lang=""><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="apple-touch-icon" sizes="57x57" href="/assets/favicon/apple-icon-57x57.png"/><link rel="apple-touch-icon" sizes="60x60" href="/assets/favicon/apple-icon-60x60.png"/><link rel="apple-touch-icon" sizes="72x72" href="/assets/favicon/apple-icon-72x72.png"/><link rel="apple-touch-icon" sizes="76x76" href="/assets/favicon/apple-icon-76x76.png"/><link rel="apple-touch-icon" sizes="114x114" href="/assets/favicon/apple-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="/assets/favicon/apple-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="/assets/favicon/apple-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="/assets/favicon/apple-icon-152x152.png"/><link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-icon-180x180.png"/><link rel="icon" type="image/png" sizes="192x192" href="/assets/favicon/android-icon-192x192.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon/favicon-96x96.png"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png"/><link rel="manifest" href="/assets/favicon/manifest.json"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="/assets/favicon/ms-icon-144x144.png"/><meta name="theme-color" content="#000000"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="apple-mobile-web-app-title" content="inspire korea"/><meta name="twitter:title" content=""/><meta name="twitter:description" content=""/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@DevYakuza"/><meta name="twitter:creator" content="@DevYakuza"/><title> - </title><meta name="description" content="책이나 자료를 통해 얻은 영감과 인사이트를 공유하여, 다른 분들도 영감을 얻기를 바랍니다."/><meta property="og:locale" content="ko"/><meta name="author" content="dev.yakuza@gmail.com"/><meta name="og:title" content=""/><meta name="og:description" content=""/><meta property="og:url" content="https://ink.posstree.com/node_modules/comment-json/"/><meta property="og:site_name" content=""/><meta property="og:image" content="https://ink.posstree.com"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2025-01-11 17:21:04 +0900"/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-125408913-2"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-125408913-2");</script><script data-ad-client="ca-pub-7987914246691031" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR" rel="stylesheet"/><link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css"/><link rel="stylesheet" href="/assets/vendor/font-awesome/css/font-awesome.min.css"/><link rel="stylesheet" href="/assets/main.css?v=20250111"/><link rel="alternate" type="application/rss+xml" title="[ink] 인스파이어 코리아" href="/feed.xml"/><script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "dev.yakuza",
      "url": "https://ink.posstree.com/",
      "sameAs": [
        "https://www.facebook.com/yakuza.dev.54",
        "https://www.instagram.com/dev_yakuza/",
        "https://twitter.com/DevYakuza"
      ]
    }
  </script><script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://ink.posstree.com/",
      "logo": "https://ink.posstree.com/assets/images/icon.jpg"
    }
  </script><link rel="stylesheet" href="/assets/highlight/railscasts.css"/><script src="/assets/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="/assets//vendor/lazysizes/lazysizes.min.js" async=""></script></head><body><nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav"><div class="container"><a class="navbar-brand" href="/"><img src="/assets/images/icon.png" alt="dev.yakuza blog logo"/> inspire korea </a><div class="navbar-menu-container"><div class="collapse navbar-collapse"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item dropdown"><a class="nav-link" target="_blank" rel="noopener" href="https://dev-yakuza.github.io/ko/">Tech Blog</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://dev-yakuza.github.io/app/list/ko/">Apps</a></li><li class="nav-item"><a class="nav-link" href="/contact/">Contact</a></li></ul></div><button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"> Menu <i class="fa fa-bars"></i></button></div><div class="collapse navbar-collapse" id="navbarResponsive"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item dropdown"><a class="nav-link" target="_blank" rel="noopener" href="https://dev-yakuza.github.io/ko/">Tech Blog</a></li><li class="nav-item"><a class="nav-link" target="_blank" rel="noopener" href="https://dev-yakuza.github.io/app/list/ko/">Apps</a></li><li class="nav-item"><a class="nav-link" href="/contact/">Contact</a></li></ul></div></div></nav><script>document.addEventListener("DOMContentLoaded",function(){var e=window.location.pathname;e.indexOf("/en/")>=0?($(".menu-ko").prop("href",e.replace("/en/","/ko/")),$(".menu-en").prop("href",e),$(".menu-ja").prop("href",e.replace("/en/","/"))):e.indexOf("/ko/")>=0?($(".menu-ko").prop("href",e),$(".menu-en").prop("href",e.replace("/ko/","/en/")),$(".menu-ja").prop("href",e.replace("/ko/","/"))):($(".menu-ko").prop("href","/ko"+e),$(".menu-en").prop("href","/en"+e),$(".menu-ja").prop("href",e)),$("body").on("show.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown()}),$("body").on("hide.bs.dropdown",".dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp()})});</script><header class="masthead"><div class="overlay"></div><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><div class="page-heading"><h1></h1></div></div></div></div></header><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto"><p><a href="https://github.com/kaelzhang/node-comment-json/actions/workflows/nodejs.yml"><img src="https://github.com/kaelzhang/node-comment-json/actions/workflows/nodejs.yml/badge.svg" alt="Build Status"/></a><a href="https://codecov.io/gh/kaelzhang/node-comment-json"><img src="https://codecov.io/gh/kaelzhang/node-comment-json/branch/master/graph/badge.svg" alt="Coverage"/></a><a href="https://www.npmjs.org/package/comment-json"><img src="http://img.shields.io/npm/dm/comment-json.svg" alt="npm module downloads per month"/></a></p><h1 id="comment-json">comment-json</h1><p>Parse and stringify JSON with comments. It will retain comments even after saved!</p><ul><li><a href="#parse">Parse</a> JSON strings with comments into JavaScript objects and MAINTAIN comments <ul><li>supports comments everywhere, yes, <strong>EVERYWHERE</strong> in a JSON file, eventually 😆</li><li>fixes the known issue about comments inside arrays.</li></ul></li><li><a href="#stringify">Stringify</a> the objects into JSON strings with comments if there are</li></ul><p>The usage of <code class="language-plaintext highlighter-rouge">comment-json</code> is exactly the same as the vanilla <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON"><code class="language-plaintext highlighter-rouge">JSON</code></a> object.</p><h2 id="table-of-contents">Table of Contents</h2><ul><li><a href="#why">Why</a> and <a href="#how">How</a></li><li><a href="#usage">Usage and examples</a></li><li>API reference <ul><li><a href="#parse">parse</a></li><li><a href="#stringify">stringify</a></li><li><a href="#assigntarget-object-source-object-keys-array">assign</a></li><li><a href="#commentarray">CommentArray</a></li></ul></li><li><a href="https://github.com/kaelzhang/node-comment-json/releases">Change Logs</a></li></ul><h2 id="why">Why?</h2><p>There are many other libraries that can deal with JSON with comments, such as <a href="https://npmjs.org/package/json5">json5</a>, or <a href="https://npmjs.org/package/strip-json-comments">strip-json-comments</a>, but none of them can stringify the parsed object and return back a JSON string the same as the original content.</p><p>Imagine that if the user settings are saved in <code class="language-plaintext highlighter-rouge">${library}.json</code>， and the user has written a lot of comments to improve readability. If the library <code class="language-plaintext highlighter-rouge">library</code> need to modify the user setting, such as modifying some property values and adding new fields, and if the library uses <code class="language-plaintext highlighter-rouge">json5</code> to read the settings, all comments will disappear after modified which will drive people insane.</p><p>So, <strong>if you want to parse a JSON string with comments, modify it, then save it back</strong>, <code class="language-plaintext highlighter-rouge">comment-json</code> is your must choice!</p><h2 id="how">How?</h2><p><code class="language-plaintext highlighter-rouge">comment-json</code> parse JSON strings with comments and save comment tokens into <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol">symbol</a> properties.</p><p>For JSON array with comments, <code class="language-plaintext highlighter-rouge">comment-json</code> extends the vanilla <code class="language-plaintext highlighter-rouge">Array</code> object into <a href="#commentarray"><code class="language-plaintext highlighter-rouge">CommentArray</code></a> whose instances could handle comments changes even after a comment array is modified.</p><h2 id="install">Install</h2><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm i comment-json
</code></pre></div></div><p><del>For TypeScript developers, <a href="https://www.npmjs.com/package/@types/comment-json"><code class="language-plaintext highlighter-rouge">@types/comment-json</code></a> could be used</del></p><p>Since <code class="language-plaintext highlighter-rouge">2.4.1</code>, <code class="language-plaintext highlighter-rouge">comment-json</code> contains typescript declarations, so you might as well remove <code class="language-plaintext highlighter-rouge">@types/comment-json</code>.</p><h2 id="usage">Usage</h2><p>package.json:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="c1">// package name</span>
  <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">comment-json</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div></div><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span>
  <span class="nx">parse</span><span class="p">,</span>
  <span class="nx">stringify</span><span class="p">,</span>
  <span class="nx">assign</span>
<span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">comment-json</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">package.json</span><span class="dl">'</span><span class="p">).</span><span class="nx">toString</span><span class="p">())</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="c1">// comment-json</span>

<span class="nx">stringify</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">// Will be the same as package.json, Oh yeah! 😆</span>
<span class="c1">// which will be very useful if we use a json file to store configurations.</span>
</code></pre></div></div><h3 id="sort-keys">Sort keys</h3><p>It is a common use case to sort the keys of a JSON file</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="s2">`{
  // b
  "b": 2,
  // a
  "a": 1
}`</span><span class="p">)</span>

<span class="c1">// Copy the properties including comments from `parsed` to the new object `{}`</span>
<span class="c1">// according to the sequence of the given keys</span>
<span class="kd">const</span> <span class="nx">sorted</span> <span class="o">=</span> <span class="nx">assign</span><span class="p">(</span>
  <span class="p">{},</span>
  <span class="nx">parsed</span><span class="p">,</span>
  <span class="c1">// You could also use your custom sorting function</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">parsed</span><span class="p">).</span><span class="nx">sort</span><span class="p">()</span>
<span class="p">)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">sorted</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="c1">// {</span>
<span class="c1">//   // a</span>
<span class="c1">//   "a": 1,</span>
<span class="c1">//   // b</span>
<span class="c1">//   "b": 2</span>
<span class="c1">// }</span>
</code></pre></div></div><p>For details about <code class="language-plaintext highlighter-rouge">assign</code>, see <a href="#assigntarget-object-source-object-keys-array">here</a>.</p><h2 id="parse">parse()</h2><div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">parse</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">reviver</span><span class="p">?</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">remove_comments</span><span class="p">?</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span>
  <span class="p">:</span> <span class="nx">object</span> <span class="o">|</span> <span class="kr">string</span> <span class="o">|</span> <span class="kr">number</span> <span class="o">|</span> <span class="nx">boolean</span> <span class="o">|</span> <span class="kc">null</span>
</code></pre></div></div><ul><li><strong>text</strong><code class="language-plaintext highlighter-rouge">string</code> The string to parse as JSON. See the <a href="http://json.org/">JSON</a> object for a description of JSON syntax.</li><li><strong>reviver?</strong><code class="language-plaintext highlighter-rouge">Function() | null</code> Default to <code class="language-plaintext highlighter-rouge">null</code>. It acts the same as the second parameter of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse"><code class="language-plaintext highlighter-rouge">JSON.parse</code></a>. If a function, prescribes how the value originally produced by parsing is transformed, before being returned.</li><li><strong>remove_comments?</strong><code class="language-plaintext highlighter-rouge">boolean = false</code> If true, the comments won’t be maintained, which is often used when we want to get a clean object.</li></ul><p>Returns <code class="language-plaintext highlighter-rouge">CommentJSONValue</code> (<code class="language-plaintext highlighter-rouge">object | string | number | boolean | null</code>) corresponding to the given JSON text.</p><p>If the <code class="language-plaintext highlighter-rouge">content</code> is:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 before-all
 */</span>
<span class="c1">// before-all</span>
<span class="p">{</span> <span class="c1">// before:foo</span>
  <span class="c1">// before:foo</span>
  <span class="cm">/* before:foo */</span>
  <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span> <span class="cm">/* after-prop:foo */</span><span class="p">:</span> <span class="c1">// after-colon:foo</span>
  <span class="mi">1</span> <span class="c1">// after-value:foo</span>
  <span class="c1">// after-value:foo</span>
  <span class="p">,</span> <span class="c1">// after:foo</span>
  <span class="c1">// before:bar</span>
  <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span> <span class="c1">// before:0</span>
    <span class="c1">// before:0</span>
    <span class="dl">"</span><span class="s2">baz</span><span class="dl">"</span> <span class="c1">// after-value:0</span>
    <span class="c1">// after-value:0</span>
    <span class="p">,</span> <span class="c1">// after:0</span>
    <span class="dl">"</span><span class="s2">quux</span><span class="dl">"</span>
    <span class="c1">// after:1</span>
  <span class="p">]</span> <span class="c1">// after:bar</span>
  <span class="c1">// after:bar</span>
<span class="p">}</span>
<span class="c1">// after-all</span>
</code></pre></div></div><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">inspect</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">util</span><span class="dl">'</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
  <span class="nx">inspect</span><span class="p">(</span><span class="nx">parsed</span><span class="p">,</span> <span class="p">{</span>
    <span class="c1">// Since 4.0.0, symbol properties of comments are not enumerable,</span>
    <span class="c1">// use `showHidden: true` to print them</span>
    <span class="na">showHidden</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">})</span>
<span class="p">)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">parsed</span><span class="p">))</span>
<span class="c1">// &gt; ['foo', 'bar']</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">parsed</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="c1">// 🚀 Exact as the content above! 🚀</span>
</code></pre></div></div><p>And the value of <code class="language-plaintext highlighter-rouge">parsed</code> will be:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="c1">// Comments before the JSON object</span>
  <span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">before-all</span><span class="dl">'</span><span class="p">)]:</span> <span class="p">[{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BlockComment</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="se">\n</span><span class="s1"> before-all</span><span class="se">\n</span><span class="s1"> </span><span class="dl">'</span><span class="p">,</span>
    <span class="na">inline</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">loc</span><span class="p">:</span> <span class="p">{</span>
      <span class="c1">// The start location of `/**`</span>
      <span class="na">start</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">line</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="na">column</span><span class="p">:</span> <span class="mi">0</span>
      <span class="p">},</span>
      <span class="c1">// The end location of `*/`</span>
      <span class="na">end</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">line</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="na">column</span><span class="p">:</span> <span class="mi">3</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="p">{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">LineComment</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1"> before-all</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">inline</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">loc</span><span class="p">:</span> <span class="p">...</span>
  <span class="p">}],</span>
  <span class="p">...</span>

  <span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">after-prop:foo</span><span class="dl">'</span><span class="p">)]:</span> <span class="p">[{</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BlockComment</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1"> after-prop:foo </span><span class="dl">'</span><span class="p">,</span>
    <span class="na">inline</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">loc</span><span class="p">:</span> <span class="p">...</span>
  <span class="p">}],</span>

  <span class="c1">// The real value</span>
  <span class="nx">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">bar</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">baz</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">quux</span><span class="dl">"</span><span class="p">,</span>

    <span class="c1">// The property of the array</span>
    <span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">after-value:0</span><span class="dl">'</span><span class="p">)]:</span> <span class="p">[{</span>
      <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">LineComment</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1"> after-value:0</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">inline</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">loc</span><span class="p">:</span> <span class="p">...</span>
    <span class="p">},</span> <span class="p">...],</span>
    <span class="p">...</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div><p>There are <strong>EIGHT</strong> kinds of symbol properties:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Comments before everything</span>
<span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">before-all</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">// If all things inside an object or an array are comments</span>
<span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">before</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">// comment tokens before</span>
<span class="c1">// - a property of an object</span>
<span class="c1">// - an item of an array</span>
<span class="c1">// and after the previous comma(`,`) or the opening bracket(`{` or `[`)</span>
<span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="s2">`before:</span><span class="p">${</span><span class="nx">prop</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>

<span class="c1">// comment tokens after property key `prop` and before colon(`:`)</span>
<span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="s2">`after-prop:</span><span class="p">${</span><span class="nx">prop</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>

<span class="c1">// comment tokens after the colon(`:`) of property `prop` and before property value</span>
<span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="s2">`after-colon:</span><span class="p">${</span><span class="nx">prop</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>

<span class="c1">// comment tokens after</span>
<span class="c1">// - the value of property `prop` inside an object</span>
<span class="c1">// - the item of index `prop` inside an array</span>
<span class="c1">// and before the next key-value/item delimiter(`,`)</span>
<span class="c1">// or the closing bracket(`}` or `]`)</span>
<span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="s2">`after-value:</span><span class="p">${</span><span class="nx">prop</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>

<span class="c1">// comment tokens after</span>
<span class="c1">// - comma(`,`)</span>
<span class="c1">// - the value of property `prop` if it is the last property</span>
<span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="s2">`after:</span><span class="p">${</span><span class="nx">prop</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>

<span class="c1">// Comments after everything</span>
<span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">after-all</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div><p>And the value of each symbol property is an <strong>array</strong> of <code class="language-plaintext highlighter-rouge">CommentToken</code></p><div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">CommentToken</span> <span class="p">{</span>
  <span class="nl">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BlockComment</span><span class="dl">'</span> <span class="o">|</span> <span class="dl">'</span><span class="s1">LineComment</span><span class="dl">'</span>
  <span class="c1">// The content of the comment, including whitespaces and line breaks</span>
  <span class="nx">value</span><span class="p">:</span> <span class="kr">string</span>
  <span class="c1">// If the start location is the same line as the previous token,</span>
  <span class="c1">// then `inline` is `true`</span>
  <span class="nx">inline</span><span class="p">:</span> <span class="nx">boolean</span>

  <span class="c1">// But pay attention that,</span>
  <span class="c1">// locations will NOT be maintained when stringified</span>
  <span class="nx">loc</span><span class="p">:</span> <span class="nx">CommentLocation</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">CommentLocation</span> <span class="p">{</span>
  <span class="c1">// The start location begins at the `//` or `/*` symbol</span>
  <span class="nl">start</span><span class="p">:</span> <span class="nx">Location</span>
  <span class="c1">// The end location of multi-line comment ends at the `*/` symbol</span>
  <span class="nx">end</span><span class="p">:</span> <span class="nx">Location</span>
<span class="p">}</span>

<span class="kr">interface</span> <span class="nx">Location</span> <span class="p">{</span>
  <span class="nl">line</span><span class="p">:</span> <span class="kr">number</span>
  <span class="nx">column</span><span class="p">:</span> <span class="kr">number</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="query-comments-in-typescript">Query comments in TypeScript</h3><p><code class="language-plaintext highlighter-rouge">comment-json</code> provides a <code class="language-plaintext highlighter-rouge">symbol</code>-type called <code class="language-plaintext highlighter-rouge">CommentSymbol</code> which can be used for querying comments. Furthermore, a type <code class="language-plaintext highlighter-rouge">CommentDescriptor</code> is provided for enforcing properly formatted symbol names:</p><div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span>
  <span class="nx">CommentDescriptor</span><span class="p">,</span> <span class="nx">CommentSymbol</span><span class="p">,</span> <span class="nx">parse</span><span class="p">,</span> <span class="nx">CommentArray</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">comment-json</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="s2">`{ /* test */ "foo": "bar" }`</span><span class="p">)</span>
 <span class="c1">// typescript only allows properly formatted symbol names here</span>
<span class="kd">const</span> <span class="nx">symbolName</span><span class="p">:</span> <span class="nx">CommentDescriptor</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">before:foo</span><span class="dl">'</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">((</span><span class="nx">parsed</span> <span class="k">as</span> <span class="nx">CommentArray</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span><span class="p">)[</span><span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="nx">symbolName</span><span class="p">)</span> <span class="k">as</span> <span class="nx">CommentSymbol</span><span class="p">][</span><span class="mi">0</span><span class="p">].</span><span class="nx">value</span><span class="p">)</span>
</code></pre></div></div><p>In this example, casting to <code class="language-plaintext highlighter-rouge">Symbol.for(symbolName)</code> to <code class="language-plaintext highlighter-rouge">CommentSymbol</code> is mandatory. Otherwise, TypeScript won’t detect that you’re trying to query comments.</p><h3 id="parse-into-an-object-without-comments">Parse into an object without comments</h3><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">parse</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">true</span><span class="p">))</span>
</code></pre></div></div><p>And the result will be:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">bar</span><span class="p">:</span> <span class="p">[</span>
    <span class="dl">"</span><span class="s2">baz</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">quux</span><span class="dl">"</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="special-cases">Special cases</h3><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="s2">`
// comment
1
`</span><span class="p">)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">parsed</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1">// false</span>
</code></pre></div></div><p>If we parse a JSON of primative type with <code class="language-plaintext highlighter-rouge">remove_comments:false</code>, then the return value of <code class="language-plaintext highlighter-rouge">parse()</code> will be of object type.</p><p>The value of <code class="language-plaintext highlighter-rouge">parsed</code> is equivalent to:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Number</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="nx">parsed</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">before-all</span><span class="dl">'</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">LineComment</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1"> comment</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">inline</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">loc</span><span class="p">:</span> <span class="p">...</span>
<span class="p">}]</span>
</code></pre></div></div><p>Which is similar for:</p><ul><li><code class="language-plaintext highlighter-rouge">Boolean</code> type</li><li><code class="language-plaintext highlighter-rouge">String</code> type</li></ul><p>For example</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="s2">`
"foo" /* comment */
`</span><span class="p">)</span>
</code></pre></div></div><p>Which is equivalent to</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">)</span>

<span class="nx">parsed</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">after-all</span><span class="dl">'</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[{</span>
  <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">BlockComment</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">value</span><span class="p">:</span> <span class="dl">'</span><span class="s1"> comment </span><span class="dl">'</span><span class="p">,</span>
  <span class="na">inline</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">loc</span><span class="p">:</span> <span class="p">...</span>
<span class="p">}]</span>
</code></pre></div></div><p>But there is one exception:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="s2">`
// comment
null
`</span><span class="p">)</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">parsed</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="c1">// true</span>
</code></pre></div></div><h2 id="stringify">stringify()</h2><div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">stringify</span><span class="p">(</span><span class="nx">object</span><span class="p">:</span> <span class="kr">any</span><span class="p">,</span> <span class="nx">replacer</span><span class="p">?,</span> <span class="nx">space</span><span class="p">?):</span> <span class="kr">string</span>
</code></pre></div></div><p>The arguments are the same as the vanilla <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify"><code class="language-plaintext highlighter-rouge">JSON.stringify</code></a>.</p><p>And it does the similar thing as the vanilla one, but also deal with extra properties and convert them into comments.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">parsed</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="c1">// Exactly the same as `content`</span>
</code></pre></div></div><h4 id="space">space</h4><p>If space is not specified, or the space is an empty string, the result of <code class="language-plaintext highlighter-rouge">stringify()</code> will have no comments.</p><p>For the case above:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">))</span> <span class="c1">// {"a":1}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c1">// is the same as `code`</span>
</code></pre></div></div><h2 id="assigntarget-object-source-object-keys-array">assign(target: object, source?: object, keys?: Array<string>)</string></h2><ul><li><strong>target</strong><code class="language-plaintext highlighter-rouge">object</code> the target object</li><li><strong>source?</strong><code class="language-plaintext highlighter-rouge">object</code> the source object. This parameter is optional but it is silly to not pass this argument.</li><li><strong>keys?</strong><code class="language-plaintext highlighter-rouge">Array&lt;string&gt;</code> If not specified, all enumerable own properties of <code class="language-plaintext highlighter-rouge">source</code> will be used.</li></ul><p>This method is used to copy the enumerable own properties and their corresponding comment symbol properties to the target object.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="s2">`// before all
{
  // This is a comment
  "foo": "bar"
}`</span><span class="p">)</span>

<span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">assign</span><span class="p">({</span>
  <span class="na">bar</span><span class="p">:</span> <span class="dl">'</span><span class="s1">baz</span><span class="dl">'</span>
<span class="p">},</span> <span class="nx">parsed</span><span class="p">)</span>

<span class="nx">stringify</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">// // before all</span>
<span class="c1">// {</span>
<span class="c1">//   "bar": "baz",</span>
<span class="c1">//   // This is a comment</span>
<span class="c1">//   "foo": "bar"</span>
<span class="c1">// }</span>
</code></pre></div></div><h3 id="special-cases-about-keys">Special cases about <code class="language-plaintext highlighter-rouge">keys</code></h3><p>But if argument <code class="language-plaintext highlighter-rouge">keys</code> is specified and is not empty, then comment ` before all`, which belongs to no properties, will <strong>NOT</strong> be copied.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">assign</span><span class="p">({</span>
  <span class="na">bar</span><span class="p">:</span> <span class="dl">'</span><span class="s1">baz</span><span class="dl">'</span>
<span class="p">},</span> <span class="nx">parsed</span><span class="p">,</span> <span class="p">[</span><span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">])</span>

<span class="nx">stringify</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">// {</span>
<span class="c1">//   "bar": "baz",</span>
<span class="c1">//   // This is a comment</span>
<span class="c1">//   "foo": "bar"</span>
<span class="c1">// }</span>
</code></pre></div></div><p>Specifying the argument <code class="language-plaintext highlighter-rouge">keys</code> as an empty array indicates that it will only copy non-property symbols of comments</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">assign</span><span class="p">({</span>
  <span class="na">bar</span><span class="p">:</span> <span class="dl">'</span><span class="s1">baz</span><span class="dl">'</span>
<span class="p">},</span> <span class="nx">parsed</span><span class="p">,</span> <span class="p">[])</span>

<span class="nx">stringify</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">// // before all</span>
<span class="c1">// {</span>
<span class="c1">//   "bar": "baz",</span>
<span class="c1">// }</span>
</code></pre></div></div><p>Non-property symbols include:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">before-all</span><span class="dl">'</span><span class="p">)</span>
<span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">before</span><span class="dl">'</span><span class="p">)</span>
<span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">'</span><span class="s1">after-all</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div><h2 id="commentarray"><code class="language-plaintext highlighter-rouge">CommentArray</code></h2><blockquote><p>Advanced Section</p></blockquote><p>All arrays of the parsed object are <code class="language-plaintext highlighter-rouge">CommentArray</code>s.</p><p>The constructor of <code class="language-plaintext highlighter-rouge">CommentArray</code> could be accessed by:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span><span class="nx">CommentArray</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">comment-json</span><span class="dl">'</span><span class="p">)</span>
</code></pre></div></div><p>If we modify a comment array, its comment symbol properties could be handled automatically.</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="s2">`{
  "foo": [
    // bar
    "bar",
    // baz,
    "baz"
  ]
}`</span><span class="p">)</span>

<span class="nx">parsed</span><span class="p">.</span><span class="nx">foo</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="dl">'</span><span class="s1">qux</span><span class="dl">'</span><span class="p">)</span>

<span class="nx">stringify</span><span class="p">(</span><span class="nx">parsed</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">// {</span>
<span class="c1">//   "foo": [</span>
<span class="c1">//     "qux",</span>
<span class="c1">//     // bar</span>
<span class="c1">//     "bar",</span>
<span class="c1">//     // baz</span>
<span class="c1">//     "baz"</span>
<span class="c1">//   ]</span>
<span class="c1">// }</span>
</code></pre></div></div><p>Oh yeah! 😆</p><p>But pay attention, if you reassign the property of a comment array with a normal array, all comments will be gone:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">parsed</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">quux</span><span class="dl">'</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">foo</span><span class="p">)</span>
<span class="nx">stringify</span><span class="p">(</span><span class="nx">parsed</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">// {</span>
<span class="c1">//   "foo": [</span>
<span class="c1">//     "quux",</span>
<span class="c1">//     "qux",</span>
<span class="c1">//     "bar",</span>
<span class="c1">//     "baz"</span>
<span class="c1">//   ]</span>
<span class="c1">// }</span>

<span class="c1">// Whoooops!! 😩 Comments are gone</span>
</code></pre></div></div><p>Instead, we should:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">parsed</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CommentArray</span><span class="p">(</span><span class="dl">'</span><span class="s1">quux</span><span class="dl">'</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">parsed</span><span class="p">.</span><span class="nx">foo</span><span class="p">)</span>
<span class="nx">stringify</span><span class="p">(</span><span class="nx">parsed</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">// {</span>
<span class="c1">//   "foo": [</span>
<span class="c1">//     "quux",</span>
<span class="c1">//     "qux",</span>
<span class="c1">//     // bar</span>
<span class="c1">//     "bar",</span>
<span class="c1">//     // baz</span>
<span class="c1">//     "baz"</span>
<span class="c1">//   ]</span>
<span class="c1">// }</span>
</code></pre></div></div><h2 id="special-cases-about-trailing-comma">Special Cases about Trailing Comma</h2><p>If we have a JSON string <code class="language-plaintext highlighter-rouge">str</code></p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">,</span> <span class="c1">// comment</span>
<span class="p">}</span>
</code></pre></div></div><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// When stringify, trailing commas will be eliminated</span>
<span class="kd">const</span> <span class="nx">stringified</span> <span class="o">=</span> <span class="nx">stringify</span><span class="p">(</span><span class="nx">parse</span><span class="p">(</span><span class="nx">str</span><span class="p">),</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">stringified</span><span class="p">)</span>
</code></pre></div></div><p>And it will print:</p><div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span> <span class="c1">// comment</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="license">License</h2><p><a href="/node_modules/comment-json/LICENSE">MIT</a></p><h2 id="change-logs">Change Logs</h2><p>See <a href="https://github.com/kaelzhang/node-comment-json/releases">releases</a></p></div></div></div><footer><div class="container"><div class="row"><div class="col-lg-8 col-md-10 mx-auto share-title"> SHARE </div><div class="col-lg-8 col-md-10 mx-auto"><ul class="list-inline text-center"><li class="list-inline-item"><a href="https://twitter.com/intent/tweet?text=&url=https://ink.posstree.com/node_modules/comment-json/" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-twitter fa-stack-1x fa-inverse"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> Twitter </div></a></li><li class="list-inline-item"><a href="https://www.facebook.com/sharer/sharer.php?u=https://ink.posstree.com/node_modules/comment-json/" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-facebook fa-stack-1x fa-inverse"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> Facebook </div></a></li><li class="list-inline-item"><a href="https://ink.posstree.com/feed.xml" rel="nofollow noreferrer noopener" target="_blank"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-rss-square fa-stack-1x fa-inverse" aria-hidden="true"></i></span><div style="width: 0; height: 0; overflow: hidden; float: left;"> RSS </div></a></li></ul><p class="copyright text-muted"> Copyright &copy; dev.yakuza@gmail.com 2025 </p></div></div></div></footer><script src="/assets/vendor/jquery/jquery.min.js"></script><script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script><script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script><script src="/assets/scripts.js?v=20250111"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/railscasts.min.css"></body></html>